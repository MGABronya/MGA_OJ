# 需求分析-演示版本

## 1 引言

### 1.1 编写目的

  本文档的目的是详细地介绍Dream Online Judge演示版本所包含的需求，以便客户能够确认产品的确切需求以及开发人员能够根据需求设计编码。

### 1.2 背景

  该项目适为在线评测平台，接口文档可以于https://github.com/MGABronya/MGA_OJ/blob/main/document/mgaOJ%E7%9A%84%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3.md查看，前端目前仍在开发中。

## 2 任务概述

### 2.1 项目概述

#### 2.1.1 项目来源及背景

  Dream Online Judge是一款针对Online Judge使用者的软件，大家可以在这里找到合适的提单、参加比赛以及分享自己的做题过程与经历。

#### 2.1.2 项目目标

  该项目的目标为用于项目的初步展示，展示的目标用户为评委老师以及即将使用该系统、对Online Judge有需求的用户。

#### 2.1.3 系统功能概述

(1)注册与登录：用户可以通过邮箱进行注册与登录。

(2)题目创建：拥有权限的用户可以创建题目。

(3)题目的展示：用户可以查看题目列表以及题目的具体信息。

(4)测试提交：用户可以在正式提交前进行测试提交并查看提交结果。

(5)提交：用户可以提交代码并实时查看提交状态。同时用户可以查看判题列表查看所有用户的判题状态。用户可以通过指定字段查看某些提交的状态。

(6)竞赛创建：拥有权限的用户可以对比赛进行创建。

(7)竞赛查看：用户可以查看竞赛列表，并查看竞赛的具体详情。

(8)竞赛报名：用户可以报名竞赛。

(9)竞赛提交：用户参与竞赛后可以按要求提交代码。

(10)竞赛排名：用户可以实时的看到竞赛排名情况。

(11)黑客功能：用户可以使用在比赛的hack时间内使用hack功能，以及在其它实现了hack题目的提交中使用hack功能。

## 3 功能需求

### 3.1 功能描述

(1)用户注册

   功能描述：用户可以通过邮箱接收验证码的方式完成账号的注册。

​		使用接口：

- /user/regist 用户注册
- /user/verify/:id 验证码获取

(2)用户登录

​		功能描述：用户可以通过邮箱以及对应密码完成登录。

   使用接口：

- /user/login 用户登录
- /user/info 返回当前登录的用户

(3)创建题目

   功能描述：用户可以发布题目，同时，用户可以为题目创建程序以供题目的特判、标准程序、输入检测程序。

​		使用接口：

- /problem/create(需要二级权限) 创建题目
- /program/create(需要二级权限) 创建程序

(5）查看题目列表

​		功能描述：用户可以查看题目列表，同时列出每道题的ac次数、提交次数、ac率、用户是否已通过。

​		使用接口：

- /problem/list 查看题目列表

- /record/list 查看提交列表

（6）查看题目详情

​		功能描述：用户可以查看题目信息。除了题目的基本信息外，还包含题目是否可以黑客（是否拥有标准程序或特判程序以及输入检测程序）、是否特判、更加详细的题目提交详细。

​		使用接口：

- /record/list 查看提交列表，可以使用这些信息做一个信息整理，如提交数量、各提交状态占比。
- /problem/show/:id 查看题目信息
- /problem/test/num/:id 查看题目测试用例数量

（7）测试提交

​		功能描述：用户可以进行题目的测试提交，并查看测试提交的结果，此处需要设置帮用户自动填入测试样例的功能，并自动进行输出比对，当然用户也可以对输入进行修改。

​		使用接口：

- /test/create（注意，该接口前缀与先前不同）

（8）正式提交

​		功能描述：用户可以对题目进行正式提交，并能够实时查看提交的状态，除此之外，要求用户可以看到先前自己对于该题目的提交以及提交状态，并查看提交的详细信息。

​		使用接口：

- /record模型及以下的所有接口

（9）查看在线提交列表

​		功能描述：用户可以实时所有提交，并按照用户需求列出提交列表，并查看每份提交的具体情况。

​		使用接口：

- /record模型下的所有接口

(10)  hack指定提交

​		功能描述：用户可以hack某个指定的提交。注意，提交必须标注是否可以提交hack、是否已经被hack，如果已经被hack，应当可以看到具体的hack信息。提交是否可以hack取决于提交的题目是否有输入检测程序，如果提交已经被hack，应当不允许再对该提交进行hack。

​		使用接口：

- /record/hack/:id hack指定提交
- /hack/show/:id 查看hack

（11） 创建比赛

​		功能描述：用户可以创建指定比赛。

​		使用接口：

- /competition/create/:id(需要二级权限) 创建比赛
- /problem/new/create(需要二级权限) 创建赛内题目
- /problem/new/quote/:competition_id/:problem_id/:score（需要二级权限）引用题目
- /problem/new/rematch/:competition_id/:problem_id/:score（需要二级权限）重现题目
- /program/create(需要二级权限) 创建程序

（12）查看比赛

​		功能描述：用户可以查看竞赛列表，并查看竞赛详情。

​		使用接口：

- /competition/show/:id 查看竞赛
- /competition/list 查看竞赛列表
- /problem/new/list/:id 查看赛内题目列表

（13）比赛报名

​		功能描述：用户报名比赛、查看报名状态、取消报名、查看当前报名列表。

​		使用接口：

- 所有实现了EnterInterface的竞赛相关接口

（14）比赛提交

​		功能描述：用户进行比赛内的提交，要求用户能够在比赛内使用测试提交、正式提交、实时查看提交状态、查看提交历史列表，实时查看所有人的提交列表，查看某类特定的提交列表。

​		使用接口：

- 所有有实现了RecordInterface的竞赛相关接口

（15）比赛排名

​		功能描述：用户可以查看实时的比赛排名榜单，并查看自己的题目通过情况、分数、罚时、排名，并完成滚榜功能。

​		使用接口：

- /competition/member/rank/:competition/:member 查看指定竞赛指定成员的排名
- /competition/member/show/:competition/:member 查看指定竞赛成员的罚时情况
- /competition/rank/list/:id 查看竞赛排行
- /competition/rolling/list/:id 进行滚榜

（16）比赛hack功能

​		功能描述：在比赛的hack时间内，开放参赛者对提交的hack。

​		使用接口：

- 所有实现了HackInterface的竞赛相关接口
- /hack/show/:id 查看hack

（17）小组功能

​		功能描述：创建、查看小组，其主要用于小组比赛

​		使用接口：

- /group/create 创建用户组
- group/show/:id 查看用户组

## 4 其他需求

### 4.1 验收标准

制作功能可以正常展示即可		

### 4.2 质量属性

1.可用性：测试人员可以正常以上功能

2.可靠性：在五月份内可以大致上满足无错运行的要求

3.可维护性：服务器重启、写进日志

4.安全性：对用户的密码加密